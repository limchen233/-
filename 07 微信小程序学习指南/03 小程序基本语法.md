#小程序基本语法

## WXML语法
### 一、数据绑定
WXML中的动态数据都是来自对应的 Page 的 data 。

#### 1、简单绑定

数据绑定使用 Mustache 语法，也就是双大括号将变量包括起来

**文本内容**

    <view> {{msg}} </view>
****
    Page:({
      data:{
        msg: 'Hello World'
      }
    })

**组件属性(需要在双引号之内)**

    <view id="{{id}}"> </view>
****
    Page({
      data: {
        id: 1
      }
    })

**控制属性(需要在双引号之内)**

    <view wx:if="{{flag}}"></view>
****
    Page(
      {
        data:{
          flag: true
        }
      }
    )

**关键字(需要在双引号之内)**

true：boolean 类型的 true，代表真值。false： boolean 类型的 false，代表假值。

    <checkbox checked="{{false}}"></checkbox>

特别注意：不要直接写 checked="false"，其计算结果是一个字符串，转成 boolean 类型后代表真值。

**组合**

还可以在Mustache内直接进行组合，构成新的对象或者数组。

数组

    <view wx:for="{{ [zero,1,2,3,4] }}">{{item}}</view>
****
    Page({
      data:{
        zero: 0
      }
    })
    
    组合成数组 [0,1,2,3,4]

对象

    Page({
      data:{
        a: 1,
        b: 2
      }
    })
****
    <template is="objectCombine" data="{{for: a, bar: b}}"></template>
    
    组合成的对象是 {for: 1, bar: 2}

也可以使用扩展运算符 `...` 来将一个对象展开

    <template is="objectCombine" data="{{ ...obj1,...obj2, e:5}}"></template>
****
    Page({
      data:{
        obj1:{
          a: 1,
          b: 2  
        },
        obj2:{
          c: 3,
          d: 4
        }
      }
    })
    
    合成的对象是 `{a:1,b:2,c:3,d:4,e:5}`

如果对象的 key 和 value 相同，也可以间接的表达

    <template is="objectCombine" data="{{a,b}}"></template>
****
    Page({
      data:{
        a:'hello',
        b:'world'
      }
    })
    
    组合成的对象是 `{a:hello, b:world}`



> 注意：上述方式可以随意组合，但是如有存在变量名相同的情况，后边的会覆盖前面。

> 注意：花括号和引号之间如果有空格，将最终被解析成为字符串

    <view wx:for="{{[1,2,3]}} ">
      {{item}}
    </view>
    
    //等同于
    
    <view wx:for="{{[1,2,3] + ' '}}">
      {{item}}
    </view>

### 二、列表渲染

在组件上使用 `wx:for` 控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。

默认数组的当前项的下标变量名默认为 `index`，数组当前项的变量名默认为 `item`

```html
<view wx:for="{{array}}">
	{{index}}:{{item.message}}
</view>
```

```javascript
page({
  data:{
    array:[
      {message:'foo'},
      {message:'bar'}
    ]
  }
})
```

![](C:%5CpersonalFiles%5CFront-Web%5C07%20%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%5C03%20%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.assets%5C2.png)

使用`wx:for-item`可以指定数组当前元素的变量名，使用`wx:for-index`可以指定数组当前下标的变量名。也就是起别名。还是以上面的数组`array`为例：

```html
<view wx:for="{{array}}" wx:for-index="id" wx:for-item="value">
	{{id}}:{{value.message}}
</view>
```

![](C:%5CpersonalFiles%5Cimages%5Cimages%5C3.png)